<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Stream TV | Premium Streaming</title>
<script src="https://cdn.jsdelivr.net/npm/hls.js@latest"></script>

<style>
:root{
  --bg:#d1ecff;
  --panel:rgba(255,255,255,0.8);
  --card:rgba(255,255,255,0.9);
  --primary:#6cb1da;
  --darkAccent:#34729c;
  --textDark:#123247;
  --muted:#4f7f9f;
  --danger:#ff3b3b;
}

*{margin:0;padding:0;box-sizing:border-box;font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif}

body{
  background:linear-gradient(135deg,#d1ecff,#eaf6ff,#d1ecff);
  background-size:300% 300%;
  animation:bgMove 14s ease infinite;
  color:var(--textDark);
  min-height: 100vh;
}

@keyframes bgMove{
  0%{background-position:0% 50%}
  50%{background-position:100% 50%}
  100%{background-position:0% 50%}
}

/* HEADER */
header{
  display:flex;
  align-items:center;
  justify-content:space-between;
  padding:15px 30px;
  background:var(--panel);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  box-shadow:0 8px 25px rgba(0,0,0,0.05);
  position:sticky;
  top:0;
  z-index:100;
  flex-wrap: wrap; /* Added for mobile */
  gap: 10px; /* Added for mobile */
}

.left{display:flex;align-items:center}
#menu{font-size:24px;margin-right:15px;cursor:pointer;transition:.3s; user-select: none;}
#menu:hover{transform:scale(1.1); color: var(--darkAccent)}

.logo{
  font-size:24px;
  font-weight:800;
  letter-spacing:1px;
  background:linear-gradient(90deg,var(--darkAccent),var(--primary));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}

nav{
    display: flex;
    order: 2; /* Desktop Default */
}

nav a{
  margin:0 14px;
  cursor:pointer;
  color:var(--muted);
  text-decoration:none;
  transition:.3s;
  position:relative;
  font-weight: 500;
  white-space: nowrap;
}
nav a.active,
nav a:hover{
  color:var(--darkAccent);
}
nav a::after{
  content:"";
  position:absolute;
  bottom:-4px;
  left:0;
  width:0%;
  height:2px;
  background:var(--primary);
  transition:.3s;
}
nav a:hover::after,
nav a.active::after{
  width:100%;
}

/* SEARCH & CONTROLS */
.header-right {
    display: flex;
    align-items: center;
    order: 3;
}

.search{
  background:white;
  border-radius:30px;
  padding:8px 16px;
  display:flex;
  align-items:center;
  box-shadow:0 4px 12px rgba(0,0,0,0.05);
  transition:.3s;
}
.search:focus-within{
  box-shadow:0 8px 25px rgba(52,114,156,0.2);
}
.search input{
  background:none;
  border:none;
  outline:none;
  color:var(--textDark);
  margin-left:8px;
  width: 150px;
}

/* BUTTON */
.btn{
  margin-left:15px;
  background:linear-gradient(135deg,var(--primary),var(--darkAccent));
  border:none;
  padding:10px 22px;
  border-radius:25px;
  color:white;
  cursor:pointer;
  transition:.3s;
  font-weight: 600;
}
.btn:hover{
  transform:translateY(-2px);
  box-shadow:0 8px 20px rgba(52,114,156,0.3);
}

/* SIDEBAR */
#sidebar{
  position:fixed;
  top:0;
  left:-280px;
  width:260px;
  height:100%;
  background:white;
  padding:30px 20px;
  transition:.4s cubic-bezier(0.4, 0, 0.2, 1);
  box-shadow:10px 0 40px rgba(0,0,0,0.1);
  z-index:200;
}
#sidebar.active{left:0}
#sidebar h3 { margin-bottom: 20px; color: var(--darkAccent); border-bottom: 2px solid var(--bg); padding-bottom: 10px;}

.cat{
  padding:14px;
  margin-bottom: 8px;
  border-radius:12px;
  color:var(--muted);
  cursor:pointer;
  transition:.3s;
  font-weight: 500;
}
.cat:hover, .cat.active-cat{
  background:linear-gradient(90deg,var(--primary),var(--darkAccent));
  color:white;
  transform:translateX(8px);
}

/* PAGES */
.page{
  display:none;
  padding:40px;
  max-width: 1400px;
  margin: 0 auto;
  animation:fadeIn .5s ease;
}
.page.active{display:block}

@keyframes fadeIn{
  from{opacity:0;transform:translateY(10px)}
  to{opacity:1;transform:translateY(0)}
}

/* HERO */
.hero{
  height:70vh;
  display:flex;
  flex-direction:column;
  justify-content:center;
  align-items:center;
  text-align:center;
}
.hero h1{
  font-size:clamp(32px, 8vw, 64px);
  font-weight:800;
  margin-bottom:20px;
  background:linear-gradient(90deg,var(--darkAccent),var(--primary));
  -webkit-background-clip:text;
  -webkit-text-fill-color:transparent;
}
.hero p{
  font-size:20px;
  color:var(--muted);
  max-width:600px;
  line-height: 1.6;
}
.hero button{
  margin-top:40px;
  padding:18px 50px;
  font-size:18px;
  font-weight: bold;
  border-radius:40px;
  border:none;
  background:linear-gradient(135deg,var(--primary),var(--darkAccent));
  color:white;
  cursor:pointer;
  transition:.3s;
}
.hero button:hover{
  transform:scale(1.05);
  box-shadow:0 15px 35px rgba(52,114,156,0.3);
}

/* GRID */
.grid{
  display:grid;
  grid-template-columns:repeat(auto-fill,minmax(240px,1fr));
  gap:30px;
  margin-top: 30px;
}

.card{
  background:var(--card);
  backdrop-filter:blur(5px);
  border-radius:20px;
  overflow:hidden;
  cursor:pointer;
  transition:.4s;
  position:relative;
  box-shadow:0 10px 25px rgba(0,0,0,0.06);
  border: 1px solid rgba(255,255,255,0.3);
}
.card:hover{
  transform:translateY(-10px);
  box-shadow:0 20px 40px rgba(52,114,156,0.2);
}

.card .img-container {
  width:100%;
  height:160px;
  background: #eee;
  display: flex;
  align-items: center;
  justify-content: center;
  overflow: hidden;
}

.card img{
  width:100%;
  height:100%;
  object-fit:contain;
  padding: 10px;
}

.live{
  position:absolute;
  top:12px;
  left:12px;
  background:var(--danger);
  padding:4px 12px;
  border-radius:20px;
  font-size:10px;
  font-weight: bold;
  color:white;
  z-index: 2;
}

.fav{
  position:absolute;
  top:12px;
  right:12px;
  font-size:20px;
  cursor:pointer;
  z-index: 2;
  filter: drop-shadow(0 2px 4px rgba(0,0,0,0.2));
}

.info{padding:18px;}
.info h3{ font-size: 16px; white-space: nowrap; overflow: hidden; text-overflow: ellipsis;}

/* PAGINATION */
.pagination{
  margin:50px 0;
  text-align:center;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 15px;
}
.pagination button{
  background:white;
  border: 1px solid var(--primary);
  color: var(--primary);
  padding:10px 20px;
  border-radius:10px;
  cursor:pointer;
  transition:.3s;
  font-weight: bold;
}
.pagination button:hover:not(:disabled){
  background: var(--primary);
  color: white;
}
.pagination button:disabled{
  opacity: 0.4;
  cursor: not-allowed;
}
.pagination span{
  color:var(--textDark);
  font-weight:700;
}

/* PLAYER */
#player{
  display:none;
  position:fixed;
  inset:0;
  background:#000;
  z-index:300;
  flex-direction:column;
}
#player header {
    background: rgba(0,0,0,0.5);
    border: none;
    backdrop-filter: blur(10px);
}
video{
  flex:1;
  width:100%;
  outline: none;
}
#loader{
  position:absolute;
  top:50%;
  left:50%;
  transform:translate(-50%,-50%);
  font-size:18px;
  color:white;
  text-align: center;
}

footer{
  text-align:center;
  padding:40px;
  color:var(--muted);
  font-weight: 500;
}

.country-select{
  margin: 20px 0;
  font-weight: bold;
}
.country-select select{
  padding:10px 20px;
  border-radius:12px;
  border:none;
  background:white;
  color:var(--darkAccent);
  font-weight:bold;
  box-shadow: 0 4px 10px rgba(0,0,0,0.05);
  cursor: pointer;
  margin-left: 10px;
}

/* RESPONSIVE UPDATES */
@media (max-width: 768px) {
    header { padding: 10px 15px; }
    nav { 
        order: 3; 
        width: 100%; 
        justify-content: space-around; 
        border-top: 1px solid rgba(0,0,0,0.05); 
        padding-top: 10px;
    }
    nav a { margin: 0 5px; font-size: 14px; }
    .header-right { order: 2; flex: 1; justify-content: flex-end; }
    .search input { width: 100px; }
    .btn { display: none; } /* Hide subscribe on small mobile to save space */
    .page { padding: 20px; }
    .grid { grid-template-columns: repeat(auto-fill, minmax(160px, 1fr)); gap: 15px; }
    .card .img-container { height: 110px; }
    .info { padding: 10px; }
    .info h3 { font-size: 14px; }
}

@media (max-width: 480px) {
    .logo { font-size: 18px; }
    .grid { grid-template-columns: repeat(2, 1fr); }
    .hero h1 { font-size: 32px; }
    .hero p { font-size: 16px; }
}

/* SCROLLBAR */
::-webkit-scrollbar { width: 8px; }
::-webkit-scrollbar-track { background: var(--bg); }
::-webkit-scrollbar-thumb { background: var(--primary); border-radius: 10px; }
</style>
</head>

<body>

<div id="sidebar">
  <h3>Categories</h3>
  <div class="cat active-cat" onclick="filterCategory('All')">All Channels</div>
  <div class="cat" onclick="filterCategory('News')">News</div>
  <div class="cat" onclick="filterCategory('Sports')">Sports</div>
  <div class="cat" onclick="filterCategory('Movies')">Movies</div>
  <div class="cat" onclick="filterCategory('Kids')">Kids</div>
  <div class="cat" onclick="filterCategory('Music')">Music</div>
</div>

<header>
  <div class="left">
    <span id="menu" title="Open Menu">‚ò∞</span>
    <div class="logo">Stream TV</div>
  </div>

  <nav>
    <a class="active" onclick="showPage('home',this)">Home</a>
    <a onclick="showPage('browse',this)">Browse</a>
    <a onclick="showPage('live',this);renderLive()">Live Now</a>
    <a onclick="showPage('my',this);renderFavorites()">My Channels</a>
  </nav>

  <div class="header-right">
    <div class="search">
      üîç <input id="search" placeholder="Search channels...">
    </div>
    <button class="btn">Subscribe</button>
  </div>
</header>

<section id="home" class="page active">
  <div class="hero">
    <h1>Light. Modern. Seamless.</h1>
    <p>Experience the future of television. High-quality streams from around the globe, delivered instantly to your screen.</p>
    <button onclick="showPage('browse')">Explore Channels</button>
  </div>
</section>

<section id="browse" class="page">
  <div style="display: flex; justify-content: space-between; align-items: center; flex-wrap: wrap;">
      <h1>Browse Channels</h1>
      <div class="country-select">
        üåç Country:
        <select id="country">
          <option value="in">India üáÆüá≥</option>
          <option value="us">USA üá∫üá∏</option>
          <option value="uk">UK üá¨üáß</option>
          <option value="jp">Japan üáØüáµ</option>
          <option value="au">Australia üá¶üá∫</option>
        </select>
      </div>
  </div>

  <div id="grid" class="grid"></div>

  <div class="pagination">
    <button id="prevBtn" onclick="prevPage()">Previous</button>
    <span id="pageInfo"></span>
    <button id="nextBtn" onclick="nextPage()">Next</button>
  </div>
</section>

<section id="live" class="page">
  <h1>Live Now</h1>
  <div class="grid" id="liveGrid"></div>
</section>

<section id="my" class="page">
  <h1>My Channels</h1>
  <div class="grid" id="favGrid"></div>
</section>

<footer>¬© 2026 Stream TV ‚Ä¢ Premium Light Edition</footer>

<div id="player">
  <header style="padding: 10px 20px;">
    <button class="btn" onclick="closePlayer()" style="background: rgba(255,255,255,0.2); margin-left: 0; display: block;">‚úï Close Player</button>
    <div class="logo" style="-webkit-text-fill-color: white; font-size: 16px; margin-top: 5px;" id="playingTitle"></div>
  </header>
  <div id="loader">
      <div style="margin-bottom: 10px;">‚åõ</div>
      Loading stream...
  </div>
  <video id="video" controls autoplay playsinline></video>
</div>

<script>
const grid=document.getElementById("grid");
const liveGrid=document.getElementById("liveGrid");
const favGrid=document.getElementById("favGrid");
const search=document.getElementById("search");
const video=document.getElementById("video");
const player=document.getElementById("player");
const loader=document.getElementById("loader");
const sidebar=document.getElementById("sidebar");
const menu=document.getElementById("menu");
const pageInfo=document.getElementById("pageInfo");
const countrySelect=document.getElementById("country");
const playingTitle=document.getElementById("playingTitle");

let channels=[], filteredChannels=[];
let favorites=JSON.parse(localStorage.getItem("favorites"))||[];
let currentPage=1;
const perPage=24; 
let hls;

/* SIDEBAR & CATEGORIES */
menu.onclick=(e)=>{
    e.stopPropagation();
    sidebar.classList.toggle("active");
};

document.addEventListener("click",e=>{
  if(!sidebar.contains(e.target) && sidebar.classList.contains("active") && e.target !== menu)
    sidebar.classList.remove("active");
});

function filterCategory(cat) {
    document.querySelectorAll('.cat').forEach(c => c.classList.remove('active-cat'));
    
    // Find the clicked element via event
    if(event) event.target.classList.add('active-cat');
    
    if(cat === 'All') {
        filteredChannels = [...channels];
    } else {
        filteredChannels = channels.filter(c => c.name.toLowerCase().includes(cat.toLowerCase()));
    }
    currentPage = 1;
    renderChannels();
    sidebar.classList.remove("active");
}

/* PAGE SWITCH */
function showPage(id,el){
  document.querySelectorAll(".page").forEach(p=>p.classList.remove("active"));
  document.getElementById(id).classList.add("active");
  document.querySelectorAll("nav a").forEach(a=>a.classList.remove("active"));
  if(el) el.classList.add("active");
  window.scrollTo({top: 0, behavior: 'smooth'});
}

/* LOAD COUNTRY */
async function loadCountry(code){
  grid.innerHTML = "<div style='padding:20px'>Loading channels...</div>";
  channels=[]; filteredChannels=[];
  currentPage=1;
  
  try {
      const response = await fetch(`https://iptv-org.github.io/iptv/countries/${code}.m3u`);
      const data = await response.text();
      let name="", logo="";
      
      data.split("\n").forEach(l=>{
        l=l.trim();
        if(l.startsWith("#EXTINF")){
          logo=l.match(/tvg-logo="(.*?)"/)?.[1]||"";
          name=l.split(",")[1] || "Unknown Channel";
        }
        else if(l.startsWith("http")){
          channels.push({name, url:l, logo});
        }
      });
      
      filteredChannels=[...channels];
      renderChannels();
  } catch (err) {
      grid.innerHTML = "<div style='padding:20px; color:red'>Error loading channels. Please try again.</div>";
  }
}

/* RENDER */
function renderChannels(){
  grid.innerHTML="";
  if(filteredChannels.length === 0) {
      grid.innerHTML = "<p style='padding:20px'>No channels found.</p>";
      pageInfo.innerText = "0 of 0";
      return;
  }

  const start=(currentPage-1)*perPage;
  const end=start+perPage;
  
  filteredChannels.slice(start,end).forEach(ch=>createCard(ch,grid));
  
  const totalPages = Math.ceil(filteredChannels.length/perPage);
  pageInfo.innerText=`Page ${currentPage} of ${totalPages}`;
  
  document.getElementById("prevBtn").disabled = currentPage === 1;
  document.getElementById("nextBtn").disabled = currentPage === totalPages;
}

function nextPage(){
  if(currentPage*perPage < filteredChannels.length){
    currentPage++; 
    renderChannels();
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
}
function prevPage(){
  if(currentPage > 1){
    currentPage--; 
    renderChannels();
    window.scrollTo({top: 0, behavior: 'smooth'});
  }
}

function createCard(ch,target){
  const c=document.createElement("div");
  c.className="card";
  const isFav = favorites.some(f=>f.url===ch.url);
  const fallbackImg = "https://via.placeholder.com/400x300?text=No+Logo";
  
  c.innerHTML=`
    <span class="live">LIVE</span>
    <span class="fav" title="Toggle Favorite">${isFav?"‚ù§Ô∏è":"ü§ç"}</span>
    <div class="img-container">
        <img loading="lazy" src="${ch.logo || fallbackImg}" onerror="this.src='${fallbackImg}'">
    </div>
    <div class="info"><h3>${ch.name}</h3></div>`;

  c.querySelector(".fav").onclick=(e)=>{
    e.stopPropagation(); 
    toggleFavorite(ch, e.target);
  };
  
  c.onclick=()=>play(ch);
  target.appendChild(c);
}

/* FAVORITES */
function toggleFavorite(ch, el){
  const index = favorites.findIndex(f=>f.url===ch.url);
  if(index > -1) {
    favorites.splice(index, 1);
    el.innerText = "ü§ç";
  } else {
    favorites.push(ch);
    el.innerText = "‚ù§Ô∏è";
  }
  localStorage.setItem("favorites",JSON.stringify(favorites));
  if(document.getElementById("my").classList.contains("active")) renderFavorites();
}

function renderFavorites(){
  favGrid.innerHTML="";
  if(favorites.length === 0) {
      favGrid.innerHTML = "<p>You haven't added any favorites yet.</p>";
      return;
  }
  favorites.forEach(ch=>createCard(ch,favGrid));
}

function renderLive(){
  liveGrid.innerHTML="";
  channels.slice(0,24).forEach(ch=>createCard(ch,liveGrid));
}

/* SEARCH */
let searchTimeout;
search.oninput=()=>{
  clearTimeout(searchTimeout);
  searchTimeout = setTimeout(() => {
      const v=search.value.toLowerCase();
      filteredChannels=channels.filter(c=>c.name.toLowerCase().includes(v));
      currentPage=1;
      renderChannels();
  }, 300);
};

/* PLAYER */
function play(ch){
  playingTitle.innerText = ch.name;
  player.style.display="flex";
  loader.style.display="block";
  
  if(hls) hls.destroy();
  
  if(Hls.isSupported()){
    hls=new Hls();
    hls.loadSource(ch.url);
    hls.attachMedia(video);
    hls.on(Hls.Events.MANIFEST_PARSED, () => video.play());
    hls.on(Hls.Events.ERROR, (event, data) => {
        if(data.fatal) loader.innerText = "Error: Stream unavailable";
    });
  } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
    video.src=ch.url;
  }
  video.onplaying=()=>loader.style.display="none";
}

function closePlayer(){
  player.style.display="none";
  video.pause();
  video.src = "";
  if(hls) hls.destroy();
}

countrySelect.onchange=()=>loadCountry(countrySelect.value);
loadCountry("in");
</script>

</body>
</html>
